// @editorjs/list@2.0.2 downloaded from https://ga.jspm.io/npm:@editorjs/list@2.0.2/dist/editorjs-list.mjs

(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:"•"}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const e='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',t='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',d='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',u='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',p='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',h='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',g='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',m='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var c=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(a,t,c.get?c:{enumerable:!0,get:function(){return e[t]}})})),a}var _={},w={},x={};Object.defineProperty(x,"__esModule",{value:!0});x.allInputsSelector=Pt;function Pt(){var e=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+e.map((function(e){return'input[type="'.concat(e,'"]')})).join(", ")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.allInputsSelector=void 0;var t=x;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}})})(w);var P={},j={};Object.defineProperty(j,"__esModule",{value:!0});j.isNativeInput=jt;function jt(e){var t=["INPUT","TEXTAREA"];return!(!e||!e.tagName)&&t.includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNativeInput=void 0;var t=j;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}})})(P);var M={},T={};Object.defineProperty(T,"__esModule",{value:!0});T.append=Tt;function Tt(e,t){Array.isArray(t)?t.forEach((function(t){e.appendChild(t)})):e.appendChild(t)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.append=void 0;var t=T;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return t.append}})})(M);var I={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.blockElements=Mt;function Mt(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.blockElements=void 0;var t=A;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return t.blockElements}})})(I);var B={},W={};Object.defineProperty(W,"__esModule",{value:!0});W.calculateBaseline=Lt;function Lt(e){var t=window.getComputedStyle(e),a=parseFloat(t.fontSize),c=parseFloat(t.lineHeight)||a*1.2,d=parseFloat(t.paddingTop),u=parseFloat(t.borderTopWidth),p=parseFloat(t.marginTop),h=a*.8,g=(c-a)/2,m=p+u+d+g+h;return m}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateBaseline=void 0;var t=W;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return t.calculateBaseline}})})(B);var D={},R={},H={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.isContentEditable=Nt;function Nt(e){return e.contentEditable==="true"}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isContentEditable=void 0;var t=F;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return t.isContentEditable}})})(H);Object.defineProperty(R,"__esModule",{value:!0});R.canSetCaret=Bt;var $=P,q=H;function Bt(e){var t=!0;if((0,$.isNativeInput)(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=(0,q.isContentEditable)(e);return t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.canSetCaret=void 0;var t=R;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return t.canSetCaret}})})(D);var Y={},V={};function Wt(e,t,a){const c=a.value!==void 0?"value":"get",d=a[c],u=`#${t}Cache`;if(a[c]=function(...e){return this[u]===void 0&&(this[u]=d.apply(this,e)),this[u]},c==="get"&&a.set){const t=a.set;a.set=function(a){delete e[u],t.apply(this,a)}}return a}function Ue(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>window.navigator.appVersion.toLowerCase().indexOf(e)!==-1));return t!==void 0&&(e[t]=!0),e}function ae(e){return e!=null&&e!==""&&(typeof e!="object"||Object.keys(e).length>0)}function Dt(e){return!ae(e)}const Ht=()=>typeof window<"u"&&window.navigator!==null&&ae(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Ft(e){const t=Ue();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),e}function Rt(e){return e[0].toUpperCase()+e.slice(1)}function qt(e){const t=document.createElement("div");t.style.position="absolute",t.style.left="-999px",t.style.bottom="-999px",t.innerHTML=e,document.body.appendChild(t);const a=window.getSelection(),c=document.createRange();if(c.selectNode(t),a===null)throw new Error("Cannot copy text to clipboard");a.removeAllRanges(),a.addRange(c),document.execCommand("copy"),document.body.removeChild(t)}function Ut(e,t,a){let c;return(...d)=>{const u=this,l=()=>{c=void 0,a!==!0&&e.apply(u,d)},p=a===!0&&c!==void 0;window.clearTimeout(c),c=window.setTimeout(l,t),p&&e.apply(u,d)}}function S(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function zt(e){return S(e)==="boolean"}function ze(e){return S(e)==="function"||S(e)==="asyncfunction"}function Kt(e){return ze(e)&&/^\s*class\s+/.test(e.toString())}function Xt(e){return S(e)==="number"}function L(e){return S(e)==="object"}function Gt(e){return Promise.resolve(e)===e}function Vt(e){return S(e)==="string"}function Yt(e){return S(e)==="undefined"}function X(e,...t){if(!t.length)return e;const a=t.shift();if(L(e)&&L(a))for(const t in a)L(a[t])?(e[t]===void 0&&Object.assign(e,{[t]:{}}),X(e[t],a[t])):Object.assign(e,{[t]:a[t]});return X(e,...t)}function Jt(e,t,a){const c=`«${t}» is deprecated and will be removed in the next major release. Please use the «${a}» instead.`;e&&console.warn(c)}function Qt(e){try{return new URL(e).href}catch{}return e.substring(0,2)==="//"?window.location.protocol+e:window.location.origin+e}function Zt(e){return e>47&&e<58||e===32||e===13||e===229||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}const J={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},Q={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class tn{constructor(){this.completed=Promise.resolve()}
/**
   * Add new promise to queue
   * @param operation - promise should be added to queue
   */add(e){return new Promise(((t,a)=>{this.completed=this.completed.then(e).then(t).catch(a)}))}}function nn(e,t,a=void 0){let c,d,u,p=null,h=0;a||(a={});const o=function(){h=a.leading===!1?0:Date.now(),p=null,u=e.apply(c,d),p===null&&(c=d=null)};return function(){const g=Date.now();!h&&a.leading===!1&&(h=g);const m=t-(g-h);return c=this,d=arguments,m<=0||m>t?(p&&(clearTimeout(p),p=null),h=g,u=e.apply(c,d),p===null&&(c=d=null)):!p&&a.trailing!==!1&&(p=setTimeout(o,m)),u}}const Z=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:tn,beautifyShortcut:Ft,cacheable:Wt,capitalize:Rt,copyTextToClipboard:qt,debounce:Ut,deepMerge:X,deprecationAssert:Jt,getUserOS:Ue,getValidUrl:Qt,isBoolean:zt,isClass:Kt,isEmpty:Dt,isFunction:ze,isIosDevice:Ht,isNumber:Xt,isObject:L,isPrintableKey:Zt,isPromise:Gt,isString:Vt,isUndefined:Yt,keyCodes:J,mouseButtons:Q,notEmpty:ae,throttle:nn,typeOf:S},Symbol.toStringTag,{value:"Module"})),ee=wt(Z);Object.defineProperty(V,"__esModule",{value:!0});V.containsOnlyInlineElements=sn;var te=ee,ne=I;function sn(e){var t;(0,te.isString)(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;var n=function(e){return!(0,ne.blockElements)().includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n)};return Array.from(t.children).every(n)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.containsOnlyInlineElements=void 0;var t=V;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return t.containsOnlyInlineElements}})})(Y);var re={},ie={},oe={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.make=on;function on(e,t,a){var c;t===void 0&&(t=null),a===void 0&&(a={});var d=document.createElement(e);if(Array.isArray(t)){var u=t.filter((function(e){return e!==void 0}));(c=d.classList).add.apply(c,u)}else t!==null&&d.classList.add(t);for(var p in a)Object.prototype.hasOwnProperty.call(a,p)&&(d[p]=a[p]);return d}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.make=void 0;var t=se;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return t.make}})})(oe);Object.defineProperty(ie,"__esModule",{value:!0});ie.fragmentToString=cn;var le=oe;function cn(e){var t=(0,le.make)("div");return t.appendChild(e),t.innerHTML}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fragmentToString=void 0;var t=ie;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return t.fragmentToString}})})(re);var ce={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.getContentLength=fn;var ue=P;function fn(e){var t,a;return(0,ue.isNativeInput)(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:(a=(t=e.textContent)===null||t===void 0?void 0:t.length)!==null&&a!==void 0?a:0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContentLength=void 0;var t=de;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return t.getContentLength}})})(ce);var pe={},fe={},he=k&&k.__spreadArray||function(e,t,a){if(a||arguments.length===2)for(var c,d=0,u=t.length;d<u;d++)(c||!(d in t))&&(c||(c=Array.prototype.slice.call(t,0,d)),c[d]=t[d]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(fe,"__esModule",{value:!0});fe.getDeepestBlockElements=Ge;var ve=Y;function Ge(e){return(0,ve.containsOnlyInlineElements)(e)?[e]:Array.from(e.children).reduce((function(e,t){return he(he([],e,!0),Ge(t),!0)}),[])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestBlockElements=void 0;var t=fe;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return t.getDeepestBlockElements}})})(pe);var ge={},me={},be={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.isLineBreakTag=hn;function hn(e){return["BR","WBR"].includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLineBreakTag=void 0;var t=ye;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return t.isLineBreakTag}})})(be);var ke={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.isSingleTag=mn;function mn(e){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isSingleTag=void 0;var t=Ce;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return t.isSingleTag}})})(ke);Object.defineProperty(me,"__esModule",{value:!0});me.getDeepestNode=Ye;var Oe=P,_e=be,Se=ke;function Ye(e,t){t===void 0&&(t=!1);var a=t?"lastChild":"firstChild",c=t?"previousSibling":"nextSibling";if(e.nodeType===Node.ELEMENT_NODE&&e[a]){var d=e[a];if((0,Se.isSingleTag)(d)&&!(0,Oe.isNativeInput)(d)&&!(0,_e.isLineBreakTag)(d))if(d[c])d=d[c];else{if(d.parentNode===null||!d.parentNode[c])return d.parentNode;d=d.parentNode[c]}return Ye(d,t)}return e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestNode=void 0;var t=me;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return t.getDeepestNode}})})(ge);var we={},Ee={},xe=k&&k.__spreadArray||function(e,t,a){if(a||arguments.length===2)for(var c,d=0,u=t.length;d<u;d++)(c||!(d in t))&&(c||(c=Array.prototype.slice.call(t,0,d)),c[d]=t[d]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.findAllInputs=kn;var Pe=Y,je=pe,Me=w,Le=P;function kn(e){return Array.from(e.querySelectorAll((0,Me.allInputsSelector)())).reduce((function(e,t){return(0,Le.isNativeInput)(t)||(0,Pe.containsOnlyInlineElements)(t)?xe(xe([],e,!0),[t],!1):xe(xe([],e,!0),(0,je.getDeepestBlockElements)(t),!0)}),[])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAllInputs=void 0;var t=Ee;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return t.findAllInputs}})})(we);var Te={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.isCollapsedWhitespaces=_n;function _n(e){return!/[^\t\n\r ]/.test(e)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCollapsedWhitespaces=void 0;var t=Ie;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return t.isCollapsedWhitespaces}})})(Te);var Ne={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.isElement=In;var Be=ee;function In(e){return!(0,Be.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isElement=void 0;var t=Ae;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return t.isElement}})})(Ne);var We={},De={},Re={},He={};Object.defineProperty(He,"__esModule",{value:!0});He.isLeaf=wn;function wn(e){return e!==null&&e.childNodes.length===0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLeaf=void 0;var t=He;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return t.isLeaf}})})(Re);var Fe={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.isNodeEmpty=Ln;var qe=be,Xe=Ne,Ke=P,Ve=ke;function Ln(e,t){var a="";return!((0,Ve.isSingleTag)(e)&&!(0,qe.isLineBreakTag)(e))&&((0,Xe.isElement)(e)&&(0,Ke.isNativeInput)(e)?a=e.value:e.textContent!==null&&(a=e.textContent.replace("​","")),t!==void 0&&(a=a.replace(new RegExp(t,"g"),"")),a.trim().length===0)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeEmpty=void 0;var t=$e;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return t.isNodeEmpty}})})(Fe);Object.defineProperty(De,"__esModule",{value:!0});De.isEmpty=$n;var Je=Re,Qe=Fe;function $n(e,t){e.normalize();for(var a=[e];a.length>0;){var c=a.shift();if(c){if(e=c,(0,Je.isLeaf)(e)&&!(0,Qe.isNodeEmpty)(e,t))return!1;a.push.apply(a,Array.from(e.childNodes))}}return!0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var t=De;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return t.isEmpty}})})(We);var Ze={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.isFragment=Wn;var tt=ee;function Wn(e){return!(0,tt.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFragment=void 0;var t=et;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return t.isFragment}})})(Ze);var nt={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.isHTMLString=Hn;var it=oe;function Hn(e){var t=(0,it.make)("div");return t.innerHTML=e,t.childElementCount>0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHTMLString=void 0;var t=rt;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return t.isHTMLString}})})(nt);var ot={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.offset=Fn;function Fn(e){var t=e.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop,d=t.top+c,u=t.left+a;return{top:d,left:u,bottom:d+t.height,right:u+t.width}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.offset=void 0;var t=at;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return t.offset}})})(ot);var st={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.prepend=Rn;function Rn(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach((function(t){return e.prepend(t)}))):e.prepend(t)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=void 0;var t=lt;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return t.prepend}})})(st);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=e.offset=e.make=e.isLineBreakTag=e.isSingleTag=e.isNodeEmpty=e.isLeaf=e.isHTMLString=e.isFragment=e.isEmpty=e.isElement=e.isContentEditable=e.isCollapsedWhitespaces=e.findAllInputs=e.isNativeInput=e.allInputsSelector=e.getDeepestNode=e.getDeepestBlockElements=e.getContentLength=e.fragmentToString=e.containsOnlyInlineElements=e.canSetCaret=e.calculateBaseline=e.blockElements=e.append=void 0;var t=w;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}});var a=P;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return a.isNativeInput}});var c=M;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return c.append}});var d=I;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return d.blockElements}});var u=B;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return u.calculateBaseline}});var p=D;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return p.canSetCaret}});var h=Y;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return h.containsOnlyInlineElements}});var g=re;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return g.fragmentToString}});var m=ce;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return m.getContentLength}});var k=pe;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return k.getDeepestBlockElements}});var _=ge;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return _.getDeepestNode}});var x=we;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return x.findAllInputs}});var j=Te;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return j.isCollapsedWhitespaces}});var T=H;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return T.isContentEditable}});var A=Ne;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return A.isElement}});var W=We;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return W.isEmpty}});var R=Ze;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return R.isFragment}});var F=nt;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return F.isHTMLString}});var $=Re;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return $.isLeaf}});var q=Fe;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return q.isNodeEmpty}});var V=be;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return V.isLineBreakTag}});var J=ke;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return J.isSingleTag}});var Q=oe;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return Q.make}});var Z=ot;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return Z.offset}});var ee=st;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return ee.prepend}})})(_);const ct="cdx-list",dt={wrapper:ct,item:`${ct}__item`,itemContent:`${ct}__item-content`,itemChildren:`${ct}__item-children`};class v{static get CSS(){return{...dt,orderedList:`${ct}-ordered`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ol wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ol element
   */}renderWrapper(e){let t;return t=e===!0?_.make("ol",[v.CSS.wrapper,v.CSS.orderedList]):_.make("ol",[v.CSS.orderedList,v.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param _meta - meta of the list item unused in rendering of the ordered list
   * @returns - created html list item element
   */}renderItem(e,t){const a=_.make("li",v.CSS.item),c=_.make("div",v.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return a.appendChild(c),a
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${v.CSS.itemContent}`);return!t||_.isEmpty(t)?"":t.innerHTML}
/**
   * Returns item meta, for ordered list
   * @returns item meta object
   */getItemMeta(){return{}}composeDefaultMeta(){return{}}}class b{static get CSS(){return{...dt,unorderedList:`${ct}-unordered`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ol wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ul element
   */}renderWrapper(e){let t;return t=e===!0?_.make("ul",[b.CSS.wrapper,b.CSS.unorderedList]):_.make("ul",[b.CSS.unorderedList,b.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param _meta - meta of the list item unused in rendering of the unordered list
   * @returns - created html list item element
   */}renderItem(e,t){const a=_.make("li",b.CSS.item),c=_.make("div",b.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return a.appendChild(c),a
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${b.CSS.itemContent}`);return!t||_.isEmpty(t)?"":t.innerHTML}
/**
   * Returns item meta, for unordered list
   * @returns Item meta object
   */getItemMeta(){return{}}composeDefaultMeta(){return{}}}function O(e){return e.nodeType===Node.ELEMENT_NODE}var ut={},pt={},ft={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.getContenteditableSlice=Un;var vt=_;function Un(e,t,a,c,d){var u;d===void 0&&(d=!1);var p=document.createRange();if(c==="left"?(p.setStart(e,0),p.setEnd(t,a)):(p.setStart(t,a),p.setEnd(e,e.childNodes.length)),d===!0){var h=p.extractContents();return(0,vt.fragmentToString)(h)}var g=p.cloneContents(),m=document.createElement("div");m.appendChild(g);var k=(u=m.textContent)!==null&&u!==void 0?u:"";return k}Object.defineProperty(ft,"__esModule",{value:!0});ft.checkContenteditableSliceForEmptiness=Xn;var gt=_,mt=ht;function Xn(e,t,a,c){var d=(0,mt.getContenteditableSlice)(e,t,a,c);return(0,gt.isCollapsedWhitespaces)(d)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkContenteditableSliceForEmptiness=void 0;var t=ft;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}})})(pt);var bt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContenteditableSlice=void 0;var t=ht;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}})})(bt);var yt={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.focus=Vn;var Ct=_;function Vn(e,t){var a,c;if(t===void 0&&(t=!0),(0,Ct.isNativeInput)(e)){e.focus();var d=t?0:e.value.length;e.setSelectionRange(d,d)}else{var u=document.createRange(),p=window.getSelection();if(!p)return;var s=function(e,t){t===void 0&&(t=!1);var a=document.createTextNode("");t?e.insertBefore(a,e.firstChild):e.appendChild(a),u.setStart(a,0),u.setEnd(a,0)},o=function(e){return e!=null},h=e.childNodes,g=t?h[0]:h[h.length-1];if(o(g)){for(;o(g)&&g.nodeType!==Node.TEXT_NODE;)g=t?g.firstChild:g.lastChild;if(o(g)&&g.nodeType===Node.TEXT_NODE){var m=(c=(a=g.textContent)===null||a===void 0?void 0:a.length)!==null&&c!==void 0?c:0;d=t?0:m;u.setStart(g,d),u.setEnd(g,d)}else s(e,t)}else s(e);p.removeAllRanges(),p.addRange(u)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.focus=void 0;var t=kt;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return t.focus}})})(yt);var Ot={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.getCaretNodeAndOffset=Yn;function Yn(){var e=window.getSelection();if(e===null)return[null,0];var t=e.focusNode,a=e.focusOffset;return t===null?[null,0]:(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length>0&&(t.childNodes[a]!==void 0?(t=t.childNodes[a],a=0):(t=t.childNodes[a-1],t.textContent!==null&&(a=t.textContent.length))),[t,a])}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCaretNodeAndOffset=void 0;var t=_t;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return t.getCaretNodeAndOffset}})})(Ot);var St={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.getRange=Jn;function Jn(){var e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getRange=void 0;var t=Et;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return t.getRange}})})(St);var xt={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.isCaretAtEndOfInput=xn;var At=_,$t=Ot,en=pt;function xn(e){var t=(0,At.getDeepestNode)(e,!0);if(t===null)return!0;if((0,At.isNativeInput)(t))return t.selectionEnd===t.value.length;var a=(0,$t.getCaretNodeAndOffset)(),c=a[0],d=a[1];return c!==null&&(0,en.checkContenteditableSliceForEmptiness)(e,c,d,"right")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtEndOfInput=void 0;var t=It;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return t.isCaretAtEndOfInput}})})(xt);var rn={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.isCaretAtStartOfInput=nr;var ln=_,dn=_t,un=ft;function nr(e){var t=(0,ln.getDeepestNode)(e);if(t===null||(0,ln.isEmpty)(e))return!0;if((0,ln.isNativeInput)(t))return t.selectionEnd===0;if((0,ln.isEmpty)(e))return!0;var a=(0,dn.getCaretNodeAndOffset)(),c=a[0],d=a[1];return c!==null&&(0,un.checkContenteditableSliceForEmptiness)(e,c,d,"left")}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtStartOfInput=void 0;var t=an;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return t.isCaretAtStartOfInput}})})(rn);var pn={},vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.save=ar;var gn=_,bn=Et;function ar(){var e=(0,bn.getRange)(),t=(0,gn.make)("span");if(t.id="cursor",t.hidden=!0,!!e)return e.insertNode(t),function(){var a=window.getSelection();a&&(e.setStartAfter(t),e.setEndAfter(t),a.removeAllRanges(),a.addRange(e),setTimeout((function(){t.remove()}),150))}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var t=vn;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return t.save}})})(pn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=e.isCaretAtStartOfInput=e.isCaretAtEndOfInput=e.getRange=e.getCaretNodeAndOffset=e.focus=e.getContenteditableSlice=e.checkContenteditableSliceForEmptiness=void 0;var t=pt;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}});var a=bt;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return a.getContenteditableSlice}});var c=yt;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return c.focus}});var d=Ot;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return d.getCaretNodeAndOffset}});var u=St;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return u.getRange}});var p=xt;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return p.isCaretAtEndOfInput}});var h=rn;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return h.isCaretAtStartOfInput}});var g=pn;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return g.save}})})(ut);class f{static get CSS(){return{...dt,checklist:`${ct}-checklist`,itemChecked:`${ct}__checkbox--checked`,noHover:`${ct}__checkbox--no-hover`,checkbox:`${ct}__checkbox-check`,checkboxContainer:`${ct}__checkbox`}}
/**
   * Assign passed readonly mode and config to relevant class properties
   * @param readonly - read-only mode flag
   * @param config - user config for Tool
   */constructor(e,t){this.config=t,this.readOnly=e
/**
   * Renders ul wrapper for list
   * @param isRoot - boolean variable that represents level of the wrappre (root or childList)
   * @returns - created html ul element
   */}renderWrapper(e){let t;return e===!0?(t=_.make("ul",[f.CSS.wrapper,f.CSS.checklist]),t.addEventListener("click",(e=>{const t=e.target;if(t){const e=t.closest(`.${f.CSS.checkboxContainer}`);e&&e.contains(t)&&this.toggleCheckbox(e)}}))):t=_.make("ul",[f.CSS.checklist,f.CSS.itemChildren]),t
/**
   * Redners list item element
   * @param content - content used in list item rendering
   * @param meta - meta of the list item used in rendering of the checklist
   * @returns - created html list item element
   */}renderItem(t,a){const c=_.make("li",[f.CSS.item,f.CSS.item]),d=_.make("div",f.CSS.itemContent,{innerHTML:t,contentEditable:(!this.readOnly).toString()}),u=_.make("span",f.CSS.checkbox),p=_.make("div",f.CSS.checkboxContainer);return a.checked===!0&&p.classList.add(f.CSS.itemChecked),u.innerHTML=e,p.appendChild(u),c.appendChild(p),c.appendChild(d),c
/**
   * Return the item content
   * @param item - item wrapper (<li>)
   * @returns - item content string
   */}getItemContent(e){const t=e.querySelector(`.${f.CSS.itemContent}`);return!t||_.isEmpty(t)?"":t.innerHTML}
/**
   * Return meta object of certain element
   * @param item - will be returned meta information of this item
   * @returns Item meta object
   */getItemMeta(e){const t=e.querySelector(`.${f.CSS.checkboxContainer}`);return{checked:!!t&&t.classList.contains(f.CSS.itemChecked)}}composeDefaultMeta(){return{checked:!1}}
/**
   * Toggle checklist item state
   * @param checkbox - checkbox element to be toggled
   */toggleCheckbox(e){e.classList.toggle(f.CSS.itemChecked),e.classList.add(f.CSS.noHover),e.addEventListener("mouseleave",(()=>this.removeSpecialHoverBehavior(e)),{once:!0})
/**
   * Removes class responsible for special hover behavior on an item
   * @param el - item wrapper
   */}removeSpecialHoverBehavior(e){e.classList.remove(f.CSS.noHover)}}function U(e,t="after"){const a=[];let c;function i(e){switch(t){case"after":return e.nextElementSibling;case"before":return e.previousElementSibling}}for(c=i(e);c!==null;)a.push(c),c=i(c);return a.length!==0?a:null}function y(e,t=!0){let a=e;return e.classList.contains(dt.item)&&(a=e.querySelector(`.${dt.itemChildren}`)),a===null?[]:t?Array.from(a.querySelectorAll(`:scope > .${dt.item}`)):Array.from(a.querySelectorAll(`.${dt.item}`))}function lr(e){return e.nextElementSibling===null}function sr(e){return e.querySelector(`.${dt.itemChildren}`)!==null}function C(e){return e.querySelector(`.${dt.itemChildren}`)}function z(e){let t=e;e.classList.contains(dt.item)&&(t=C(e)),t!==null&&y(t).length===0&&t.remove()}function N(e){return e.querySelector(`.${dt.itemContent}`)}function E(e,t=!0){const a=N(e);a&&ut.focus(a,t)}class K{
/**
   * Getter method to get current item
   * @returns current list item or null if caret position is not undefined
   */
get currentItem(){const e=window.getSelection();if(!e)return null;let t=e.anchorNode;return t&&(O(t)||(t=t.parentNode),t)&&O(t)?t.closest(`.${dt.item}`):null}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let t=e.parentNode,a=0;for(;t!==null&&t!==this.listWrapper;)O(t)&&t.classList.contains(dt.item)&&(a+=1),t=t.parentNode;return a+1}
/**
   * Assign all passed params and renderer to relevant class properties
   * @param params - tool constructor options
   * @param params.data - previously saved data
   * @param params.config - user config for Tool
   * @param params.api - Editor.js API
   * @param params.readOnly - read-only mode flag
   * @param renderer - renderer instance initialized in tool class
   */constructor({data:e,config:t,api:a,readOnly:c,block:d},u){this.config=t,this.data=e,this.readOnly=c,this.api=a,this.block=d,this.renderer=u
/**
   * Function that is responsible for rendering list with contents
   * @returns Filled with content wrapper element of the list
   */}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",(e=>{switch(e.key){case"Enter":this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}}),!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper
/**
   * Function that is responsible for list content saving
   * @param wrapper - optional argument wrapper
   * @returns whole list saved data if wrapper not passes, otherwise will return data of the passed wrapper
   */}save(e){const t=e??this.listWrapper,r=e=>y(e).map((e=>{const t=C(e),a=this.renderer.getItemContent(e),c=this.renderer.getItemMeta(e),d=t?r(t):[];return{content:a,meta:c,items:d}})),a=t?r(t):[];let c={style:this.data.style,meta:{},items:a};return this.data.style==="ordered"&&(c.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),c
/**
   * On paste sanitzation config. Allow only tags that are allowed in the Tool.
   * @returns - config that determines tags supposted by paste handler
   * @todo - refactor and move to list instance
   */}static get pasteConfig(){return{tags:["OL","UL","LI"]}}
/**
   * Method that specified hot to merge two List blocks.
   * Called by Editor.js by backspace at the beginning of the Block
   *
   * Content of the first item of the next List would be merged with deepest item in current list
   * Other items of the next List would be appended to the current list without any changes in nesting levels
   * @param data - data of the second list to be merged with current
   */merge(e){const t=this.block.holder.querySelectorAll(`.${dt.item}`),a=t[t.length-1],c=N(a);if(a===null||c===null||(c.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const d=y(this.listWrapper);if(d.length===0)return;const u=d[d.length-1];let p=C(u);const h=e.items.shift();h!==void 0&&(h.items.length!==0&&(p===null&&(p=this.renderer.renderWrapper(!1)),this.appendItems(h.items,p)),e.items.length>0&&this.appendItems(e.items,this.listWrapper)
/**
   * On paste callback that is fired from Editor.
   * @param event - event with pasted data
   * @todo - refactor and move to list instance
   */)}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const a=this.listWrapper;a&&a.parentNode&&a.parentNode.replaceChild(this.render(),a)}
/**
   * Handle UL, OL and LI tags paste and returns List data
   * @param element - html element that contains whole list
   * @todo - refactor and move to list instance
   */pasteHandler(e){const{tagName:t}=e;let a,c="unordered";switch(t){case"OL":c="ordered",a="ol";break;case"UL":case"LI":c="unordered",a="ul"}const d={style:c,meta:{},items:[]};c==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const l=e=>Array.from(e.querySelectorAll(":scope > li")).map((e=>{const t=e.querySelector(`:scope > ${a}`),c=t?l(t):[];return{content:e.innerHTML??"",meta:{},items:c}}));return d.items=l(e),d
/**
   * Changes ordered list start property value
   * @param index - new value of the start property
   */}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset","item "+(e-1)),this.data.meta.start=e
/**
   * Changes ordered list counterType property value
   * @param counterType - new value of the counterType value
   */}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e
/**
   * Handles Enter keypress
   * @param event - keydown
   */}enterPressed(e){var t;const a=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||a===null)return;const c=((t=this.renderer)==null?void 0:t.getItemContent(a).trim().length)===0,d=a.parentNode===this.listWrapper,u=a.previousElementSibling===null,p=this.api.blocks.getCurrentBlockIndex();if(d&&c){if(lr(a)&&!sr(a)){u?this.convertItemToDefaultBlock(p,!0):this.convertItemToDefaultBlock();return}this.splitList(a)}else c?this.unshiftItem(a):this.splitItem(a)}
/**
   * Handle backspace
   * @param event - keydown
   */backspace(e){const t=this.currentItem;if(t!==null&&ut.isCaretAtStartOfInput(t)){if(e.stopPropagation(),t.parentNode===this.listWrapper&&t.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(t)}}
/**
   * Reduce indentation for current item
   * @param event - keydown
   */shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)
/**
   * Decrease indentation of the passed item
   * @param item - list item to be unshifted
   */}unshiftItem(e){if(!e.parentNode||!O(e.parentNode))return;const t=e.parentNode.closest(`.${dt.item}`);if(!t)return;let a=C(e);if(e.parentElement===null)return;const c=U(e);c!==null&&(a===null&&(a=this.renderer.renderWrapper(!1)),c.forEach((e=>{a.appendChild(e)})),e.appendChild(a)),t.after(e),E(e,!1),z(t)
/**
   * Method that is used for list splitting and moving trailing items to the new separated list
   * @param item - current item html element
   */}splitList(e){const t=y(e),a=this.block,c=this.api.blocks.getCurrentBlockIndex();if(t.length!==0){const a=t[0];this.unshiftItem(a),E(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(c);return}const d=U(e);if(d===null)return;const u=this.renderer.renderWrapper(!0);d.forEach((e=>{u.appendChild(e)}));const p=this.save(u);p.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(a==null?void 0:a.name,p,this.config,c+1),this.convertItemToDefaultBlock(c+1),u.remove()
/**
   * Method that is used for splitting item content and moving trailing content to the new sibling item
   * @param currentItem - current item html element
   */}splitItem(e){const[t,a]=ut.getCaretNodeAndOffset();if(t===null)return;const c=N(e);let d;d=c===null?"":ut.getContenteditableSlice(c,t,a,"right",!0);const u=C(e),p=this.renderItem(d);e==null||e.after(p),u&&p.appendChild(u),E(p)
/**
   * Method that is used for merging current item with previous one
   * Content of the current item would be appended to the previous item
   * Current item children would not change nesting level
   * @param item - current item html element
   */}mergeItemWithPrevious(e){const t=e.previousElementSibling,a=e.parentNode;if(a===null||!O(a))return;const c=a.closest(`.${dt.item}`);if(!t&&!c||t&&!O(t))return;let d;if(t){const e=y(t,!1);d=e.length!==0&&e.length!==0?e[e.length-1]:t}else d=c;const u=this.renderer.getItemContent(e);if(!d)return;E(d,!1);const p=N(d);if(p===null)return;p.insertAdjacentHTML("beforeend",u);const h=y(e);if(h.length===0){e.remove(),z(d);return}const g=t||c,m=C(g)??this.renderer.renderWrapper(!1);t?h.forEach((e=>{m.appendChild(e)})):h.forEach((e=>{m.prepend(e)})),C(g)===null&&d.appendChild(m),e.remove()
/**
   * Add indentation to current item
   * @param event - keydown
   */}addTab(e){var t;e.stopPropagation(),e.preventDefault();const a=this.currentItem;if(!a)return;if(((t=this.config)==null?void 0:t.maxLevel)!==void 0){const e=this.currentItemLevel;if(e!==null&&e===this.config.maxLevel)return}const c=a.previousSibling;if(c===null||!O(c))return;const d=C(c);if(d)d.appendChild(a),y(a).forEach((e=>{d.appendChild(e)}));else{const e=this.renderer.renderWrapper(!1);e.appendChild(a),y(a).forEach((t=>{e.appendChild(t)})),c.appendChild(e)}z(a),E(a,!1)
/**
   * Convert current item to default block with passed index
   * @param newBloxkIndex - optional parameter represents index, where would be inseted default block
   * @param removeList - optional parameter, that represents condition, if List should be removed
   */}convertItemToDefaultBlock(e,t){let a;const c=this.currentItem,d=c!==null?this.renderer.getItemContent(c):"";t===!0&&this.api.blocks.delete(),a=e!==void 0?this.api.blocks.insert(void 0,{text:d},void 0,e):this.api.blocks.insert(),c==null||c.remove(),this.api.caret.setToBlock(a,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const t=y(e);if(t.length!==0){const a=t[0];this.unshiftItem(a),E(e)}const a=U(e),c=this.api.blocks.getCurrentBlockIndex(),d=a===null;this.convertItemToDefaultBlock(c,d)}
/**
   * Method that calls render function of the renderer with a necessary item meta cast
   * @param itemContent - content to be rendered in new item
   * @param meta - meta used in list item rendering
   * @returns html element of the rendered item
   */renderItem(e,t){const a=t??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof v:return this.renderer.renderItem(e,a);case this.renderer instanceof b:return this.renderer.renderItem(e,a);default:return this.renderer.renderItem(e,a)}}
/**
   * Renders children list
   * @param items - list data used in item rendering
   * @param parentElement - where to append passed items
   */appendItems(e,t){e.forEach((e=>{var a;const c=this.renderItem(e.content,e.meta);if(t.appendChild(c),e.items.length){const t=(a=this.renderer)==null?void 0:a.renderWrapper(!1);this.appendItems(e.items,t),c.appendChild(t)}}))}}const yn={wrapper:`${ct}-start-with-field`,input:`${ct}-start-with-field__input`,startWithElementWrapperInvalid:`${ct}-start-with-field--invalid`};function or(e,{value:t,placeholder:a,attributes:c,sanitize:d}){const u=_.make("div",yn.wrapper),p=_.make("input",yn.input,{placeholder:a,tabIndex:-1,value:t});for(const e in c)p.setAttribute(e,c[e]);return u.appendChild(p),p.addEventListener("input",(()=>{d!==void 0&&(p.value=d(p.value));const t=p.checkValidity();!t&&!u.classList.contains(yn.startWithElementWrapperInvalid)&&u.classList.add(yn.startWithElementWrapperInvalid),t&&u.classList.contains(yn.startWithElementWrapperInvalid)&&u.classList.remove(yn.startWithElementWrapperInvalid),t&&e(p.value)})),u}const Cn=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),On=new Map([["numeric",d],["lower-roman",u],["upper-roman",p],["lower-alpha",g],["upper-alpha",h]]);function ur(e){return e.replace(/\D+/g,"")}function cr(e){return typeof e.items[0]=="string"}function dr(e){return typeof e.items[0]!="string"&&"text"in e.items[0]&&"checked"in e.items[0]&&typeof e.items[0].text=="string"&&typeof e.items[0].checked=="boolean"}function fr(e){const t=[];return cr(e)?(e.items.forEach((e=>{t.push({content:e,meta:{},items:[]})})),{style:e.style,meta:{},items:t}):dr(e)?(e.items.forEach((e=>{t.push({content:e.text,meta:{checked:e.checked},items:[]})})),{style:"checklist",meta:{},items:t}):e}class G{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:a,title:"Unordered List",data:{style:"unordered"}},{icon:c,title:"Ordered List",data:{style:"ordered"}},{icon:t,title:"Checklist",data:{style:"checklist"}}]}
/**
   * On paste sanitzation config. Allow only tags that are allowed in the Tool.
   * @returns - paste config object used in editor
   */static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>G.joinRecursive(e),import:(e,t)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:(t==null?void 0:t.defaultStyle)!==void 0?t.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}
/**
   * Set list style
   * @param style - new style to set
   */set listStyle(e){var t;this.data.style=e,this.changeTabulatorByStyle();const a=this.list.render();(t=this.listElement)==null||t.replaceWith(a),this.listElement=a
/**
   * Render plugin`s main Element and fill it with saved data
   * @param params - tool constructor options
   * @param params.data - previously saved data
   * @param params.config - user config for Tool
   * @param params.api - Editor.js API
   * @param params.readOnly - read-only mode flag
   */}constructor({data:e,config:t,api:a,readOnly:c,block:d}){var u;this.api=a,this.readOnly=c,this.config=t,this.block=d,this.defaultListStyle=((u=this.config)==null?void 0:u.defaultStyle)||"unordered";const p={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?fr(e):p,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()
/**
   * Convert from list to text for conversionConfig
   * @param data - current data of the list
   * @returns - string of the recursively merged contents of the items of the list
   */}static joinRecursive(e){return e.items.map((e=>`${e.content} ${G.joinRecursive(e)}`)).join("")}
/**
   * Function that is responsible for content rendering
   * @returns rendered list wrapper with all contents
   */render(){return this.listElement=this.list.render(),this.listElement
/**
   * Function that is responsible for content saving
   * @returns formatted content used in editor
   */}save(){return this.data=this.list.save(),this.data
/**
   * Function that is responsible for mergind two lists into one
   * @param data - data of the next standing list, that should be merged with current
   */}merge(e){this.list.merge(e)}
/**
   * Creates Block Tune allowing to change the list style
   * @returns array of tune configs
   */renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:a,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:c,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:t,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const t=or((e=>this.changeStartWith(Number(e))),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:e=>ur(e)}),a=[{label:this.api.i18n.t("Start with"),icon:m,children:{items:[{element:t,type:"html"}]}}],c={label:this.api.i18n.t("Counter type"),icon:On.get(this.data.meta.counterType),children:{items:[]}};Cn.forEach(((e,t)=>{c.children.items.push({title:this.api.i18n.t(t),icon:On.get(Cn.get(t)),isActive:this.data.meta.counterType===Cn.get(t),closeOnActivate:!0,onActivate:()=>{this.changeCounters(Cn.get(t))}})})),e.push({type:"separator"},...a,c)}return e}
/**
   * On paste callback that is fired from Editor.
   * @param event - event with pasted data
   */onPaste(e){const{tagName:t}=e.detail.data;switch(t){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}
/**
   * Handle UL, OL and LI tags paste and returns List data
   * @param element - html element that contains whole list
   */pasteHandler(e){return this.list.pasteHandler(e)}
/**
   * Changes ordered list counterType property value
   * @param counterType - new value of the counterType value
   */changeCounters(e){var t;(t=this.list)==null||t.changeCounters(e),this.data.meta.counterType=e
/**
   * Changes ordered list start property value
   * @param index - new value of the start property
   */}changeStartWith(e){var t;(t=this.list)==null||t.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new K({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new v(this.readOnly,this.config));break;case"unordered":this.list=new K({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new b(this.readOnly,this.config));break;case"checklist":this.list=new K({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new f(this.readOnly,this.config));break}}}export{G as default};

